
---
title: "Installing and managing Conda environments with the CondaSysReqs package"
author: "Tom Carroll, Doug Barrows and Matt Paul"
date: "`r format(Sys.Date(), '%m/%d/%Y')`"
package: CondaSysReqs

output:
  BiocStyle::html_document:
     number_sections: yes
     toc: true
vignette: >
  %\VignetteIndexEntry{CondaSysReqs}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
  %\usepackage[utf8]{inputenc}
---
 
```{r setup, echo=FALSE, results="hide", include = FALSE}
knitr::opts_chunk$set(tidy=FALSE, cache=FALSE,
                      #dev="png",
                      message=FALSE, error=FALSE, warning=TRUE)
options(width=100)
```

# Introduction

The CondaSysReqs package offers a simple toolset to install and manage Conda environments from R using the the **install_CondaTools**  and **install_CondaSysReqs** functions.

# Installation

Use the `BiocManager` package to download and install the package from our Github repository:

```{r getPackage, eval=FALSE}
if (!requireNamespace("BiocManager", quietly = TRUE))
    install.packages("BiocManager")
BiocManager::install("https://github.com/RockefellerUniversity/CondaSysReqs")
```

Once installed, load it into your R session:

```{r}
library(CondaSysReqs)
```


# Simple install Conda Environment from R console using **install_CondaTools**. 

The  **install_CondaTools()** function allows the user to specify required Conda software and the desired environment to install into.

Miniconda is installed as part of the process (by default into the r-reticulate's default Conda location).

```{r}
install_CondaTools("salmon","myCondaToolSet")
```

We can add additional tools to our Conda environment by specifying *updateEnv = TRUE*.

```{r}
pathToConda <- install_CondaTools("macs2","myCondaToolSet",updateEnv = TRUE)
pathToConda
```

Although we will not activate the environment, many tools can be used straight from the Conda environment's bin directory.

```{r}
pathToMacs <- file.path(pathToConda$pathToEnvBin,"macs2")
pathToMacs
Macs_help <- system(paste(pathToMacs,"-h"),intern = TRUE)
Macs_help

pathToSalmon <- file.path(pathToConda$pathToEnvBin,"salmon")
pathToSalmon
Salmon_help <- system(paste(pathToSalmon,"-h"),intern = TRUE)
Salmon_help
```

# Acknowledgements
Thank you to Ji-Dung Luo and Wei Wang for testing/vignette review/critical feedback and Ziwei Liang for their support.

# Session info

```{r sessionInfo}
sessionInfo()
```

# References

