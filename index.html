<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Install Conda packages from System Requirements section of package Description file • CondaSysReqs</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Install Conda packages from System Requirements section of package Description file">
<meta property="og:description" content="Install Conda packages from System Requirements section of package Description file.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">CondaSysReqs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.9.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/CondaSysReqs.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<hr>
<p>title: “Introduction to Herper” author:</p>
<ul>
<li>Matt Paul</li>
<li>Bioinformatics Resource Center - Rockefeller University</li>
<li>“<a href="mailto:mpaul@rockefeller.edu" class="email">mpaul@rockefeller.edu</a>” date: “10 September, 2020” output: html_document: keep_md: yes theme: cosmo —</li>
</ul>
<hr>
<div id="what-is-herper" class="section level2">
<h2 class="hasAnchor">
<a href="#what-is-herper" class="anchor"></a>What is Herper?</h2>
<p>The Herper package is a simple toolset to install and manage Conda packages and environments from R.</p>
<p>Many R packages require the use of external dependencies. Often these dependencies can be installed and managed with the Conda package repository. For example 169 Bioconductor packages have external dependencies listed in their System Requirements field (often with these packages having several requirements) [03 September, 2020].</p>
<hr>
<p><img src="imgs/pkg_deps_bar_mask-1.png"><!-- --></p>
<hr>
<p>The Herper package includes functions that allow the easy management of these external dependencies from within the R console.</p>
<hr>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Use the <code>BiocManager</code> package to download and install the package from our Github repository:</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="co">if</span> (<span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html">requireNamespace</a></span>(<span class="st">"BiocManager"</span>, quietly = <span class="fl">TRUE</span>))
    <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"BiocManager"</span>)
<span class="kw">BiocManager</span>::<span class="fu"><a href="https://rdrr.io/pkg/BiocManager/man/install.html">install</a></span>(<span class="st">"https://github.com/RockefellerUniversity/CondaSysReqs"</span>)
</pre></div>
<p>Once installed, load it into your R session:</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw">CondaSysReqs</span>)
</pre></div>
<pre><code>## Loading required package: reticulate</code></pre>
<hr>
</div>
<div id="simple-install-of-conda-packages-from-r-console-using-install_condatools" class="section level2">
<h2 class="hasAnchor">
<a href="#simple-install-of-conda-packages-from-r-console-using-install_condatools" class="anchor"></a>Simple install of Conda packages from R console using <strong>install_CondaTools</strong>.</h2>
<p>The <strong>install_CondaTools()</strong> function allows the user to specify required Conda software and the desired environment to install into.</p>
<p>Miniconda is installed as part of the process (by default into the r-reticulate’s default Conda location). If you already have Miniconda installed you specify the path with the <em>pathToMiniConda</em> parameter.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="fu"><a href="reference/install_CondaTools.html">install_CondaTools</a></span>(<span class="st">"salmon"</span>, <span class="st">"myCondaToolSet"</span>)
</pre></div>
<pre><code>## $pathToConda
## [1] "/tmp//r-miniconda/bin/conda"
## 
## $environment
## [1] "myCondaToolSet"
## 
## $pathToEnvBin
## [1] "/tmp//r-miniconda/envs/myCondaToolSet/bin"</code></pre>
<p>We can add additional tools to our Conda environment by specifying <em>updateEnv = TRUE</em>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="kw">pathToConda</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/install_CondaTools.html">install_CondaTools</a></span>(<span class="st">"macs2"</span>, <span class="st">"myCondaToolSet"</span>, updateEnv = <span class="fl">TRUE</span>)
<span class="kw">pathToConda</span>
</pre></div>
<pre><code>## $pathToConda
## [1] "/tmp//r-miniconda/bin/conda"
## 
## $environment
## [1] "myCondaToolSet"
## 
## $pathToEnvBin
## [1] "/tmp//r-miniconda/envs/myCondaToolSet/bin"</code></pre>
<hr>
</div>
<div id="simple-install-of-r-package-dependencies-using-install_condasysreqs" class="section level2">
<h2 class="hasAnchor">
<a href="#simple-install-of-r-package-dependencies-using-install_condasysreqs" class="anchor"></a>Simple install of R package dependencies using <strong>install_CondaSysReqs</strong>.</h2>
<hr>
</div>
<div id="export-of-conda-environments-to-yaml-files-using-export_condaenv" class="section level2">
<h2 class="hasAnchor">
<a href="#export-of-conda-environments-to-yaml-files-using-export_condaenv" class="anchor"></a>Export of Conda environments to YAML files using <strong>export_CondaEnv</strong>.</h2>
<p>The <strong>export_CondaEnv</strong> function allows the user to export the environment information to a <em>.yml</em> file. These environment YAML files contain all essential information about the package, allowing for reproducibilty and easy distribution of Conda system configuration for collaboration.</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="kw">yml_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"myCondaToolSet_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span>(), <span class="st">"%Y%m%d"</span>),<span class="st">".yml"</span>)
<span class="fu"><a href="reference/export_CondaEnv.html">export_CondaEnv</a></span>(<span class="st">"myCondaToolSet"</span>, <span class="kw">yml_name</span>)
</pre></div>
<pre><code>## Warning in system(paste(pathToConda, "env export -n", env_name, "&gt;",
## export_path)): error in running command</code></pre>
<pre><code>## [1] "myCondaToolSet_20200910.yml"</code></pre>
<hr>
<p>The YAML export will contain all packages in the environment by default. If the user wants to only export the packages that were specifically installed and not their dependencies they can use the <em>depends</em> paramter.</p>
<div class="sourceCode" id="cb11"><pre class="downlit">
<span class="kw">yml_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"myCondaToolSet_nodeps_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span>(), <span class="st">"%Y%m%d"</span>),<span class="st">".yml"</span>)
<span class="fu"><a href="reference/export_CondaEnv.html">export_CondaEnv</a></span>(<span class="st">"myCondaToolSet"</span>, <span class="kw">yml_name</span>, depends=<span class="fl">FALSE</span>)
</pre></div>
<pre><code>## Warning in system(paste(pathToConda, "env export --from-history -n", env_name, :
## error in running command</code></pre>
<pre><code>## [1] "myCondaToolSet_nodeps_20200910.yml"</code></pre>
<hr>
</div>
<div id="import-of-conda-environments-from-yaml-files-using-import_condaenv" class="section level2">
<h2 class="hasAnchor">
<a href="#import-of-conda-environments-from-yaml-files-using-import_condaenv" class="anchor"></a>Import of Conda environments from YAML files using <strong>import_CondaEnv</strong>.</h2>
<p>The <strong>import_CondaEnv</strong> function allows the user to create a new conda environment from a <em>.yml</em> file. These can be previously exported from <strong>export_CondaEnv</strong>, conda, renv or manually created.</p>
<p>Users can simply provide a path to the YAML file for import. They can also specify the environment name, but by default the name will be taken from the YAML.</p>
<div class="sourceCode" id="cb14"><pre class="downlit">
<span class="fu"><a href="reference/export_CondaEnv.html">import_CondaEnv</a></span>(<span class="kw">yml_name</span>, <span class="st">"myCondaToolSet2"</span>)
</pre></div>
<pre><code>## * Downloading 'https://repo.anaconda.com/miniconda/Miniconda3-latest-MacOSX-x86_64.sh' ...</code></pre>
<pre><code>## * Installing Miniconda -- please wait a moment ...</code></pre>
<pre><code>## * Miniconda has been successfully installed at '/Users/runner/Library/r-miniconda'.</code></pre>
<hr>
</div>
<div id="using-r-packages-with-system-dependencies" class="section level2">
<h2 class="hasAnchor">
<a href="#using-r-packages-with-system-dependencies" class="anchor"></a>Using R packages with System Dependencies</h2>
<div class="sourceCode" id="cb18"><pre class="downlit">
<span class="co">#use_condaenv() </span>
</pre></div>
<hr>
</div>
<div id="running-conda-packages-from-r-console" class="section level2">
<h2 class="hasAnchor">
<a href="#running-conda-packages-from-r-console" class="anchor"></a>Running Conda packages from R console.</h2>
<p>Although we will not activate the environment, many tools can be used straight from the Conda environment’s bin directory. When the result of <strong>install_CondaTools()</strong> is assigned to a variable, it will contain the path to the bin directory for that environment. Users can then run these tools with <strong>System()</strong> commands</p>
<div class="sourceCode" id="cb19"><pre class="downlit">
<span class="kw">pathToSalmon</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="kw">pathToConda</span><span class="op">$</span><span class="kw">pathToEnvBin</span>, <span class="st">"salmon"</span>)
<span class="kw">pathToSalmon</span>
</pre></div>
<pre><code>## [1] "/tmp//r-miniconda/envs/myCondaToolSet/bin/salmon"</code></pre>
<div class="sourceCode" id="cb21"><pre class="downlit">
<span class="kw">Salmon_help</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.html">system</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="kw">pathToSalmon</span>,<span class="st">"-h"</span>), intern = <span class="fl">TRUE</span>)
<span class="kw">Salmon_help</span>
</pre></div>
<pre><code>##  [1] "salmon v1.3.0"                                                      
##  [2] ""                                                                   
##  [3] "Usage:  salmon -h|--help or "                                       
##  [4] "        salmon -v|--version or "                                    
##  [5] "        salmon -c|--cite or "                                       
##  [6] "        salmon [--no-version-check] &lt;COMMAND&gt; [-h | options]"       
##  [7] ""                                                                   
##  [8] "Commands:"                                                          
##  [9] "     index      : create a salmon index"                            
## [10] "     quant      : quantify a sample"                                
## [11] "     alevin     : single cell analysis"                             
## [12] "     swim       : perform super-secret operation"                   
## [13] "     quantmerge : merge multiple quantifications into a single file"</code></pre>
</div>
<div id="acknowledgements" class="section level2">
<h2 class="hasAnchor">
<a href="#acknowledgements" class="anchor"></a>Acknowledgements</h2>
<p>The Herper package was developed by Matt Paul, Tom Carroll and Doug Barrows. Thank you to Ji-Dung Luo and Wei Wang for testing/vignette review/critical feedback and Ziwei Liang for their support.</p>
</div>
<div id="session-information" class="section level2">
<h2 class="hasAnchor">
<a href="#session-information" class="anchor"></a>Session Information</h2>
<div class="sourceCode" id="cb23"><pre class="downlit">
<span class="kw">devtools</span>::<span class="fu"><a href="https://rdrr.io/pkg/sessioninfo/man/session_info.html">session_info</a></span>()
</pre></div>
<pre><code>## ─ Session info ───────────────────────────────────────────────────────────────
##  setting  value                       
##  version  R version 4.0.2 (2020-06-22)
##  os       macOS Catalina 10.15.6      
##  system   x86_64, darwin17.0          
##  ui       X11                         
##  language (EN)                        
##  collate  en_US.UTF-8                 
##  ctype    en_US.UTF-8                 
##  tz       UTC                         
##  date     2020-09-10                  
## 
## ─ Packages ───────────────────────────────────────────────────────────────────
##  package      * version date       lib source        
##  assertthat     0.2.1   2019-03-21 [1] CRAN (R 4.0.2)
##  backports      1.1.9   2020-08-24 [1] CRAN (R 4.0.2)
##  callr          3.4.4   2020-09-07 [1] CRAN (R 4.0.2)
##  cli            2.0.2   2020-02-28 [1] CRAN (R 4.0.2)
##  CondaSysReqs * 0.9.8   2020-09-10 [1] local         
##  crayon         1.3.4   2017-09-16 [1] CRAN (R 4.0.2)
##  desc           1.2.0   2018-05-01 [1] CRAN (R 4.0.2)
##  devtools       2.3.1   2020-07-21 [1] CRAN (R 4.0.2)
##  digest         0.6.25  2020-02-23 [1] CRAN (R 4.0.2)
##  ellipsis       0.3.1   2020-05-15 [1] CRAN (R 4.0.2)
##  evaluate       0.14    2019-05-28 [1] CRAN (R 4.0.1)
##  fansi          0.4.1   2020-01-08 [1] CRAN (R 4.0.2)
##  fs             1.5.0   2020-07-31 [1] CRAN (R 4.0.2)
##  glue           1.4.2   2020-08-27 [1] CRAN (R 4.0.2)
##  htmltools      0.5.0   2020-06-16 [1] CRAN (R 4.0.2)
##  jsonlite       1.7.1   2020-09-07 [1] CRAN (R 4.0.2)
##  knitr          1.29    2020-06-23 [1] CRAN (R 4.0.2)
##  lattice        0.20-41 2020-04-02 [2] CRAN (R 4.0.2)
##  magrittr       1.5     2014-11-22 [1] CRAN (R 4.0.2)
##  Matrix         1.2-18  2019-11-27 [2] CRAN (R 4.0.2)
##  memoise        1.1.0   2017-04-21 [1] CRAN (R 4.0.2)
##  pkgbuild       1.1.0   2020-07-13 [1] CRAN (R 4.0.2)
##  pkgload        1.1.0   2020-05-29 [1] CRAN (R 4.0.2)
##  prettyunits    1.1.1   2020-01-24 [1] CRAN (R 4.0.2)
##  processx       3.4.4   2020-09-03 [1] CRAN (R 4.0.2)
##  ps             1.3.4   2020-08-11 [1] CRAN (R 4.0.2)
##  R6             2.4.1   2019-11-12 [1] CRAN (R 4.0.2)
##  Rcpp           1.0.5   2020-07-06 [1] CRAN (R 4.0.2)
##  remotes        2.2.0   2020-07-21 [1] CRAN (R 4.0.2)
##  reticulate   * 1.16    2020-05-27 [1] CRAN (R 4.0.2)
##  rjson          0.2.20  2018-06-08 [1] CRAN (R 4.0.2)
##  rlang          0.4.7   2020-07-09 [1] CRAN (R 4.0.2)
##  rmarkdown      2.3     2020-06-18 [1] CRAN (R 4.0.2)
##  rprojroot      1.3-2   2018-01-03 [1] CRAN (R 4.0.2)
##  sessioninfo    1.1.1   2018-11-05 [1] CRAN (R 4.0.2)
##  stringi        1.5.3   2020-09-09 [1] CRAN (R 4.0.2)
##  stringr        1.4.0   2019-02-10 [1] CRAN (R 4.0.2)
##  testthat       2.3.2   2020-03-02 [1] CRAN (R 4.0.2)
##  usethis        1.6.1   2020-04-29 [1] CRAN (R 4.0.2)
##  withr          2.2.0   2020-04-20 [1] CRAN (R 4.0.2)
##  xfun           0.17    2020-09-09 [1] CRAN (R 4.0.2)
##  yaml           2.2.1   2020-02-01 [1] CRAN (R 4.0.2)
## 
## [1] /Users/runner/work/_temp/Library
## [2] /Library/Frameworks/R.framework/Versions/4.0/Resources/library</code></pre>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Thomas Carroll <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/??" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Matt Paul <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-3020-7729" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Doug Barrows <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/??" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Thomas Carroll, Matt Paul, Doug Barrows.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.0.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
